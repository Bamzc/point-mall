define(["util","text!js/module/underwriting/cydetail/cydetail.art","common","template","store"],function(t,e,i,n,a){function o(t,e){$.ajax({url:"/point-mall/data/cydetail.json",type:"get",dataType:"json",data:{commodityid:e||""},success:function(e){e.success?(e.data.imgbaseurl=e.imgbaseurl,t(e.data)):alert(e.message)},error:function(){alert("请求失败")}})}function r(){$("#commodityDetail").on("tap",".exchangeBtn",function(){var e=$("#commodityDetail").find(".mui-numbox input").val();return e<=0?void mui.alert("请选择兑换数量！"):(a.set(i.COOKIE_COMMODITY_EXCHANGE_SUM,e),void(window.location.href=t.pathname+"#/confirmOrder"))})}function m(){o(function(t){var o=n.render(e,t);$("#commodityDetail").html(o),mui(".cy-list > .card-content > .card-content-inner > .mui-numbox").numbox(),a.set(i.COOKIE_COMMODITY_POINT,t.integration),a.set(i.COOKIE_COMMODITY_PRICE,t.price),a.set(i.COOKIE_COMMODITY_NAME,t.commodityname),a.set(i.COOKIE_COMMODITY_THUMBNAIL,t.imgbaseurl+t.thumbnail)},a.get(i.COOKIE_COMMODITY_ID)),r()}return{render:function(){var e=this;t.requestHtml("/underwriting/cydetail.html",function(t){$("#pointsMall").html(t),$(document).prop("title","商品详情"),e.loadDidView()})},loadDidView:m}});