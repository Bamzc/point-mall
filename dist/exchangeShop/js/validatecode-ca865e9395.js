define(["util","jweixin"],function(e,n){function t(e){$.ajax({type:"post",url:"/point/valid/validCode.htm",dataType:"json",data:{exchangeCode:e},success:function(e){e&&"000000"==e.code?mui.openWindow({url:"#/exsuccess"}):mui.alert(e.msg)},error:function(e){}})}function o(){$("#validateCode").on("tap",".confirmBtn",function(){var e=$("#validateCode").find(".exchangeCode").val();/^\+?[1-9][0-9]*$/.test(e)?t(e):mui.alert("请输入正确的兑换码！")}),$("#validateCode").on("tap",".scanQRCodeBtn",function(){e.wxConfig(function(){n.scanQRCode({needResult:1,scanType:["qrCode","barCode"],success:function(e){var n=e.resultStr;t(n)}})})})}function i(){o()}return{render:function(){var n=this;e.requestHtml("/exchangeShop/validatecode.html",function(e){$("#pointsMall").html(e),$(document).prop("title","验证兑换码"),n.loadDidView()})},loadDidView:i}});